---
title: tmux使用
date: 2019-04-02 13:47:08
tags: tmux
categories: 基础
---

### 概念

> tmux采用C/S模型构建，输入tmux命令就相当于开启了一个服务器，此时默认将新建一个会话，然后会话中默认新建一个窗口，窗口中默认新建一个面板。会话、窗口、面板之间的联系如下： 
>
> 一个tmux session（会话）可以包含多个window（窗口），窗口默认充满会话界面，因此这些窗口中可以运行相关性不大的任务。 
>
> 一个window又可以包含多个pane（面板），窗口下的面板，都处于同一界面下，这些面板适合运行相关性高的任务，以便同时观察到它们的运行情况。 



### 安装

```shell
 ⚡ ⚙ root@ruopu64  ~  apt install tmux
```



### 实例

#### 新建会话

```shell
 ⚡ root@ruopu64  ~  tmux
 # 新建会话后，在屏幕的下方会有提示，如："[0] 0:zsh*        "test" 13:51 02-4月-19"
  ⚡ root@ruopu64  ~  exit
  # 退出会话
   ⚡ root@ruopu64  ~  tmux new -s abc
   # 创建一个叫做abc的会话，提示信息："[abc] 0:zsh*      "test" 13:53 02-4月-19"
```



#### 断开当前会话

```shell
⚡ root@ruopu64  ~  tmux detach
# 断开会话，下次还可继续操作。会话会在后台运行
也可以使用快捷键Ctrl + b松开，再按d
```



#### 进入断开的会话

```shell
 ✘ ⚡ root@ruopu64  ~  tmux a -t abc
 # 进入名称为abc的会话
  ⚡ root@ruopu64  ~  tmux attach-session
  # 进入第一个会话，可以将attach-session简写为a或at
```



#### 查看会话

```shell
⚡ root@ruopu64  ~  tmux list-sessions 
1: 1 windows (created Tue Apr  2 13:55:52 2019) [70x21]
2: 1 windows (created Tue Apr  2 13:56:05 2019) [70x21]
abc: 1 windows (created Tue Apr  2 13:52:59 2019) [70x21]
 ⚡ root@ruopu64  ~  tmux ls
1: 1 windows (created Tue Apr  2 13:55:52 2019) [70x21]
2: 1 windows (created Tue Apr  2 13:56:05 2019) [70x21]
abc: 1 windows (created Tue Apr  2 13:52:59 2019) [70x21]
# 两条命令是一样的，只是将list-sessions简写为了ls
```



#### 关闭会话

```shell
 ⚡ root@ruopu64  ~  tmux kill-session -t 2
 # 关闭名称为2的会话
  ⚡ root@ruopu64  ~  tmux kill-session 
  # 关闭所有会话
```



#### 快捷键

> 快捷键需要使用Ctrl+b激活控制台，再按下面的按键操作



##### 系统操作

| ?          | 列出所有快捷键；按q返回                                      |
| ---------- | ------------------------------------------------------------ |
| d          | 脱离当前会话；这样可以暂时返回Shell界面，输入tmux attach能够重新进入之前的会话 |
| D          | 选择要脱离的会话；在同时开启了多个会话时使用                 |
| Ctrl+z     | 挂起当前会话                                                 |
| r          | 强制重绘未脱离的会话                                         |
| s          | 列出所有会话，选择并切换会话；在同时开启了多个会话时使用     |
| :          | 进入命令行模式；此时可以输入支持的命令，例如kill-server可以关闭服务器 |
| [          | 进入复制模式；此时的操作与vi/emacs相同，按q/Esc退出          |
| ~          | 列出提示信息缓存；其中包含了之前tmux返回的各种提示信息       |
| :new<回车> | 启动新会话                                                   |
| $          | 重命名当前会话                                               |



##### 窗口操作

| c         | 创建新窗口                           |
| --------- | ------------------------------------ |
| &         | 关闭当前窗口                         |
| 数字键0~9 | 切换至指定窗口                       |
| p         | 切换至上一窗口                       |
| n         | 切换至下一窗口                       |
| l         | 在前后两个窗口间互相切换             |
| w         | 通过窗口列表切换窗口                 |
| ,         | 重命名当前窗口；这样便于识别         |
| .         | 修改当前窗口编号；相当于窗口重新排序 |
| f         | 在所有窗口中查找指定文本             |



##### 面板操作

| ”           | 将当前面板平分为上下两块                                     |
| ----------- | ------------------------------------------------------------ |
| %           | 将当前面板平分为左右两块                                     |
| x           | 关闭当前面板                                                 |
| !           | 将当前面板置于新窗口；即新建一个窗口，其中仅包含当前面板     |
| Ctrl+方向键 | 以1个单元格为单位移动边缘以调整当前面板大小                  |
| Alt+方向键  | 以5个单元格为单位移动边缘以调整当前面板大小                  |
| Space       | 在预置的面板布局中循环切换；依次包括even-horizontal、even-vertical、main-horizontal、main-vertical、tiled |
| q           | 显示面板编号                                                 |
| o           | 在当前窗口中选择下一面板                                     |
| 方向键      | 移动光标以选择面板                                           |
| {           | 向前置换当前面板                                             |
| }           | 向后置换当前面板                                             |
| Alt+o       | 逆时针旋转当前窗口的面板                                     |
| Ctrl+o      | 顺时针旋转当前窗口的面板                                     |

