---
title: MongoDB分片
date: 2019-03-07 09:28:08
tags: MongoDB分片
categories: MongoDB
---

### 概念

> 分片技术,可以满足MongoDB数据量大量增长的需求。当MongoDB存储海量的数据时，一台机器可能不足以存储数据，也可能不足以提供可接受的读写吞吐量。这时，我们就可以通过在多台机器上分割数据，使得数据库系统能存储和处理更多的数据。
>
> 分片集群特点
>
> 1. 复制所有的写入操作到主节点
> 2. 延迟的敏感数据会在主节点查询
> 3. 单个副本集限制在12个节点
> 4. 当请求量巨大时会出现内存不足
> 5. 解决本地磁盘不足
> 6. 解决垂直扩展价格昂贵



### 分片组件

![](/images/mongodb/分片组件.png)

> - Shard:
>
>   用于存储实际的数据块，实际生产环境中一个shard server角色可由几台机器组个一个replica set承担，防止主机单点故障
>
> - Config Server:
>
>   mongod实例，存储了整个 ClusterMetadata，其中包括 chunk信息。
>
> - Query Routers:
>
>   前端路由，客户端由此接入，且让整个集群看上去像单一数据库，前端应用可以透明使用。

